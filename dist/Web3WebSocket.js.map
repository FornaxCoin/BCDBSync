{"version":3,"sources":["../helpers/Web3WebSocket.js"],"names":["web3","Web3","providers","WebsocketProvider","MAIN_NET_WS","subscribeBlock","subscription","eth","subscribe","error","result","console","log","on","subscriptionId","blockHeader","number"],"mappings":";;;;;;;AAAA;;AACA;;AACI;;;;;;;;AAGJ,IAAMA,IAAI,GAAG,IAAIC,eAAJ,CAAS,IAAIA,gBAAKC,SAAL,CAAeC,iBAAnB,CAAqCC,mBAArC,CAAT,CAAb;;AACO,IAAMC,cAAc;AAAA,qEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBC,YAAAA,YADoB,GACLN,IAAI,CAACO,GAAL,CAASC,SAAT,CAAmB,iBAAnB,EAAsC,UAASC,KAAT,EAAgBC,MAAhB,EAAuB;AAC5E,kBAAI,CAACD,KAAL,EAAY;AACRE,gBAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AAEA;AACH;;AAEDC,cAAAA,OAAO,CAACF,KAAR,CAAcA,KAAd;AACH,aARkB,EASdI,EATc,CASX,WATW,EASE,UAASC,cAAT,EAAwB;AACrCH,cAAAA,OAAO,CAACC,GAAR,CAAYE,cAAZ;AACH,aAXc,EAYdD,EAZc,CAYX,MAZW,EAYH,UAASE,WAAT,EAAqB;AAC7BJ,cAAAA,OAAO,CAACC,GAAR,CAAYG,WAAZ;;AACA,sEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACS,mCAAwBA,WAAW,CAACC,MAApC,CADT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAD;AAGH,aAjBc,EAkBdH,EAlBc,CAkBX,OAlBW,EAkBFF,OAAO,CAACF,KAlBN,CADK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD;;AAAA,kBAAdJ,cAAc;AAAA;AAAA;AAAA,GAApB","sourcesContent":["import Web3 from 'web3';\nimport {blockAndTransactionToDB} from './sync.js'\n    import {MAIN_NET_WS} from '../config'\n\n\nconst web3 = new Web3(new Web3.providers.WebsocketProvider(MAIN_NET_WS));\nexport const subscribeBlock=async ()=>{\n    var subscription = web3.eth.subscribe('newBlockHeaders', function(error, result){\n        if (!error) {\n            console.log(result);\n\n            return;\n        }\n\n        console.error(error);\n    })\n        .on(\"connected\", function(subscriptionId){\n            console.log(subscriptionId);\n        })\n        .on(\"data\", function(blockHeader){\n            console.log(blockHeader);\n            (async()=>{\n                await blockAndTransactionToDB(blockHeader.number);\n            })()\n        })\n        .on(\"error\", console.error);\n\n}\n"],"file":"Web3WebSocket.js"}